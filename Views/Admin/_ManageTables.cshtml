@model IEnumerable<RestaurantMVC.Models.Ban>

<h3>ðŸ“‹ Quáº£n lÃ½ bÃ n Äƒn</h3>
<button class="btn btn-success mb-3" id="btnAddTable">âž• ThÃªm bÃ n má»›i</button>

<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>MÃ£ bÃ n</th>
            <th>TÃªn bÃ n</th>
            <th>Khu vá»±c</th>
            <th>Sá»©c chá»©a</th>
            <th>Tráº¡ng thÃ¡i</th>
            <th>Thao tÃ¡c</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var b in Model)
        {
            <tr>
                <td>@b.MaBan</td>
                <td>@b.TenBan</td>
                <td>@b.KhuVuc</td>
                <td>@b.SucChua</td>
                <td>@b.TrangThai</td>
                <td>
                    <button class="btn btn-primary btn-sm" onclick="editTable(@b.MaBan)">Sá»­a</button>
                    <button class="btn btn-danger btn-sm" onclick="deleteTable(@b.MaBan)">XÃ³a</button>
                </td>
            </tr>
        }
    </tbody>
</table>

<!-- Modal -->
<div class="modal fade" id="tableModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content" id="tableModalContent"></div>
  </div>
</div>

<script>
$("#btnAddTable").click(() => {
    $("#tableModalContent").load("/Admin/CreateTable", () => {
        const modal = new bootstrap.Modal(document.getElementById('tableModal'));
        modal.show();
    });
});

function editTable(id){
    $("#tableModalContent").load(`/Admin/EditTable/${id}`, () => {
        const modal = new bootstrap.Modal(document.getElementById('tableModal'));
        modal.show();
    });
}

function deleteTable(id){
    if(confirm("XÃ¡c nháº­n xÃ³a bÃ n nÃ y?")){
        fetch(`/Admin/DeleteTable/${id}`, {method:"POST"})
            .then(()=>$("#main-content").load("/Admin/ManageTables"));
    }
}
</script>

